<!DOCTYPE html>

<html lang="en">
        <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta charset="utf-8">
        <meta name="description" content="">

        <!-- Bootstrap core CSS -->
        <link  rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
        <!-- FONT AWSOME -->
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" media="all" />
        <!-- Datepicker -->
        <link rel="stylesheet" href="http://eternicode.github.io/bootstrap-datepicker/bootstrap-datepicker/css/datepicker3.css" media="all" />
        
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 10]>
        <div style='text-align:center'>
            <a href="http://www.microsoft.com/windows/internet-explorer/default.aspx?ocid=ie6_countdown_bannercode">
                <img src="http://www.theie6countdown.com/img/upgrade.jpg"border="0"alt=""/>
            </a>
        </div>
        <![endif]-->

        <!-- un style pour centrer les bloc et rendre le code plus simple et visible -->
        <style type="text/css">
            .center {
                text-align: center;
            }
        </style>

    </head>
    <body>
        <div class="container">
            <form class="form-horizontal" role="form" id="form_inscription">
                <fieldset class="col-xs-12 col-sm-6 col-sm-offset-3">
                    <legend>Inscription</legend>

                    <div class="form-group">
                        <label for="text" class="col-sm-4 control-label">First Name </label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="firstName" name="firstName">
                        </div>
                        <label class="col-sm-1 control-label">

                    </div>
                    <div class="form-group">
                        <label for="text" class="col-sm-4 control-label">Last Name</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="lastName" name="lastName" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="text" class="col-sm-4 control-label">Pseudo </label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="ident" name="ident">
                        </div>
                        <label class="col-sm-1 control-label">

                    </div>
                    <div class="form-group">
                        <label for="email" class="col-sm-4 control-label">E-mail </label>
                        <div class="col-sm-6">
                            <input type="email" class="form-control" id="mail" name="mail">
                        </div>
                        <label class="col-sm-1 control-label">

                    </div>
                    <div class="form-group">
                        <label for="email" class="col-sm-4 control-label">Password </label>
                        <div class="col-sm-6">
                            <input type="password" class="form-control" id="pass" name="pass">
                        </div>
                        <label class="col-sm-1 control-label">

                    </div>
                    <div class="form-group">
                        <label for="email" class="col-sm-4 control-label">Confirmation </label>
                        <div class="col-sm-6">
                            <input type="password" class="form-control" id="confpass" name="confpass">
                        </div>
                        <label class="col-sm-1 control-label">

                    </div>
                    <div class="form-group">
                        <label for="text" class="col-sm-4 control-label">Skype </label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="skype" name="skype">
                        </div>
                        <label class="col-sm-1 control-label">

                    </div>
                    <div class="form-group">
                        <label for="number_format" class="col-sm-4 control-label">Phone </label>
                        <div class="col-sm-6">
                            <input type="number_format" class="form-control" id="phone" name="phone">
                        </div>
                        <label class="col-sm-1 control-label">

                    </div>
                    <div class="form-group">
                        <label for="date" class="col-sm-4 control-label">Date of birth </label>
                        <div class="col-sm-6" id="sandbox-container">
                            <input type="text" class="form-control" id="birthDay" name="birthDay">
                        </div>
                        <label class="col-sm-1 control-label">

                    </div>
                    <div class="form-group">
                        <label for="text" class="col-sm-4 control-label">Category </label>
                        <div class="col-sm-6 selectContainer">
                            <select name="category" class="form-control" id="category">
                                <option value=""></option>
                                <option value="Directeur">Directeur</option>
                                <option value="Responsable">Responsable</option>
                                <option value="Co-responsable">Co-responsable</option>
                                <option value="Utilisateur">Utilisateur</option>
                            </select>
                        </div>
                    </div>
                   
                   <div class="form-group">
                        <div class="input-group col-xs-12">
                            <label class="col-sm-4 control-label" id="captchaOperation"></label>
                            <div class="col-sm-6">
                                <input type="tel" class="form-control " name="captcha" Placeholder="R&eacute;sultat"/>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="text" class="col-sm-4 control-label"><br /></label>
                        <div class="col-sm-6">
                            <button class="btn btn-lg btn-success pull-right" id="envoyer" name="envoyer" type="submit">Inscription</button>
                        </div>
                    </div>
                </fieldset>
            </form>
        </div>

        <div id="footer">
            <div class="container center">
                Copyright &copy; 2015 - FTW Group Corporate</p>
            </div>
        </div>

        <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
        <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="https://gitlab.com/tunisia-sat/TSBlog/raw/master/template/default/js/formValidation.min.js"></script>
        <script type="text/javascript" src="https://gitlab.com/tunisia-sat/TSBlog/raw/master/template/default/js/validation.min.js"></script>
        <script type="text/javascript" src="http://eternicode.github.io/bootstrap-datepicker/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
        
        <script>
        $(document).ready(function() {
            function randomNumber(min, max) {
                return Math.floor(Math.random() * (max - min + 1) + min);
            };

            $('#captchaOperation').html([randomNumber(1, randomNumber(10, 30)), '+', randomNumber(1, randomNumber(10, 30)), '='].join(' '));

            $('#birthDay').datepicker({
                dateFormat: 'dd/mm/yyyy',
                startView: 2,
                autoclose: true,
                todayHighlight: true
            })
            .on('changeDate', function(e) {
                // Revalidate the date field
                $('#form_inscription').formValidation('revalidateField', 'birthDay');
            });

            $('#form_inscription')
            .find('[name="category"]')
                .selectpicker()
                .change(function(e) {
                    $('#form_inscription').formValidation('revalidateField', 'category');
                })
                .end()
            .formValidation({
                framework: 'bootstrap',
                icon: {
                    valid: 'glyphicon glyphicon-ok',
                    invalid: 'glyphicon glyphicon-remove',
                    validating: 'glyphicon glyphicon-remove-refresh'
                },
                fields: {
                    firstName: {
                        validators: {
                            notEmpty: {
                                message: 'Obligatoire'
                            },
                            stringLength: {
                                min: 3,
                                max: 20,
                                message: '3 &agrave; 20 caract&egrave;res maximum'
                            },
                            regexp: {
                                regexp: /^[a-zA-Z ]{3,20}$/,
                                message: 'Fomat incorrecte, caract&egrave;res alphab&eacute;tiques seulement'
                            }
                        }
                    },
                    lastName: {
                        validators: {
                            notEmpty: {
                                message: 'Obligatoire'
                            },
                            stringLength: {
                                min: 3,
                                max: 20,
                                message: '3 &agrave; 20 caract&egrave;res'
                            },
                            regexp: {
                                regexp: /^[a-zA-Z ]{3,20}$/,
                                message: 'Fomat incorrecte, caract&egrave;res alphab&eacute;tiques seulement'
                            }
                        }
                    },
                    ident: {
                        validators: {
                            notEmpty: {
                                message: 'Obligatoire'
                            },
                            stringLength: {
                                min: 6,
                                max: 10,
                                message: '6 &agrave; 10 caract&egrave;res'
                            },
                            regexp: {
                                regexp: /^[a-z0-9_-.]{6,10}$/,
                                message: 'Fomat incorrecte'
                            }
                        }
                    },
                    mail: {
                        validators: {
                            notEmpty: {
                                message: 'Obligatoire'
                            },
                            regexp: {
                                regexp: /^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i,
                                message: 'Mail invalide'
                            }
                        }
                    },
                    category: {
                        validators: {
                            notEmpty: {
                                message: 'Obligatoire'
                            }
                        }
                    },
                    skype: {
                        validators: {
                            notEmpty: {
                                message: 'Obligatoire'
                            }
                        }
                    },
                    phone: {
                        validators: {
                            notEmpty: {
                                message: 'Obligatoire'
                            }
                        }
                    },
                    pass: {
                        validators: {
                            notEmpty: {
                                message: 'Required'
                            },
                            stringLength: {
                                min: 8,
                                max: 20,
                                message: '8 to 20  characters'
                            }
                        }
                    },
                    confpass: {
                        validators: {
                            notEmpty: {
                                message: 'Required'
                            },
                            identical: {
                                field: 'pass',
                                message: 'The password and its confirm are not the same'
                            }
                        }
                    },
                    captcha: {
                        validators: {
                            callback: {
                                message: 'Mauvaise r&eacute;ponse',
                                callback: function(value, validator, $field) {
                                    var items = $('#captchaOperation').html().split(' '), sum = parseInt(items[0]) + parseInt(items[2]);
                                    return value == sum;
                                }
                            }
                        }
                    }
                }
            })
            .on('success.form.fv', function(e) {
                // Prevent form submission
                e.preventDefault();

                var $form = $(e.target),
                    fv    = $form.data('formValidation');
                var submit = $('#envoyer');  // submit button
                submit.html('<i class="fa fa-refresh fa-refresh-animate"></i> En cours');
                $.ajax({
                    url: 'inscription.php', // form action url
                    type: 'POST', // form submit method get/post
                    dataType: 'html', // request type html/json/xml
                    data: $form.serialize(),
                    success: function(result) {
                        var $message;
                        if (result) {
                            $message = '<div class="alert alert-success"><div class="row"><div class="col-xs-8 col-xs-offset-2 h-center"><i class="fa fa-check-circle fa-2x"></i> <strong>inscription enregistr&eacute;!</strong></div></div></div>';
                        }
                        else {
                            $message = '<div class="alert alert-danger"><div class="row"><div class="col-xs-8 col-xs-offset-2 h-center"><i class="fa fa-times-circle fa-2x"></i> <strong>Oops!</strong> Un petit probl&egrave;me technique<br />Essayez plus tard SVP</div></div></div>';
                        }

                        $form.replaceWith($message).fadeIn(10000);
                        $form.destroy();
                        submit.html('Done');
                
                    },
                    error: function(e) {
                        console.log(e)
                    }
                });
            });
        });
        </script>

    </body>
</html>